<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link href="./style.css" type="text/css" rel="stylesheet">
    <script>

      var lastIndex = 10;

      var whatsNext = function() {
        var newIndex = streams.home.length - 1;
        if (newIndex > lastIndex) {
          var nextTweet = streams.home[newIndex];
          var $nextTweet = $('<div id="nextTweet"></div>');
          var $nextTime = $('<div id="nextTime"></div>').text('Posted At ----- ' + nextTweet.created_at.getHours() + ':' + nextTweet.created_at.getMinutes() + ':' + nextTweet.created_at.getSeconds())
          $nextTweet.text('@'+ nextTweet.user + ':' + nextTweet.message);
          $('#next').append($nextTweet);
          $('#next').append($nextTime);
          lastIndex = newIndex;
        };
      };

      var userDex = 0;

      var shawndrostTweets = function(){
        var shawn = streams.users.shawndrost;
        $('#shawndrost').click(function() {
          $('#rightSide').children().remove();
          for (var i = 0; i < shawn.length; i++) {
            var $shawn = $('<div class="filterTweet"></div>').text('@'+ shawn[i].user +':'+ shawn[i].message);
            var $shawnTime = $('<div class="filterTime"></div>').text('Posted at ----- ' + shawn[i].created_at);
             $('#rightSide').append($shawn);
             $('#rightSide').append($shawnTime);
          };
        })
      };

      // var myTest = function(input) {
      //   var input = this.input;
      //   $('#'+input).click(function() {
      //     var $input = $('<div></div>').text('This is my test message : '+ input[0].message);
      //     $('#rightSide').append($input);
      //   })
      // }


      // var filterUser = function(name) {
      //   var currentUser = streams.users[name];
      //   $(`#`+name).click(function() {
      //     $('#rightSide').children().remove();
      //     for (var i = 0; i < currentUser.length; i++) {
      //       var $name = $('<div id="filteredData"></div>').text('@'+name[i].user + ':'+ name[i].message);
      //       $('#rightSide').append($name);
      //     };
      //   })
      // };




      var sharksforcheapTweets = function(){
        var shark = streams.users.sharksforcheap;
        $('#sharksforcheap').click(function() {
          $('#rightSide').children().remove();
          for (var i = 0; i < shark.length; i++) {
            var $shark = $('<div class="filterTweet"></div>').text('@'+ shark[i].user +':'+ shark[i].message);
            var $sharkTime = $('<div class="filterTime"></div>').text('Posted at ----- ' + shark[i].created_at);
             $('#rightSide').append($shark);
             $('#rightSide').append($sharkTime);
          };
        })
      };

      var mracusTweets = function(){
        var mracus = streams.users.mracus;
        $('#mracus').click(function() {
          $('#rightSide').children().remove();
          for (var i = 0; i < mracus.length; i++) {
            var $mracus = $('<div class="filterTweet"></div>').text('@'+ mracus[i].user +':'+ mracus[i].message);
            var $mracusTime = $('<div class="filterTime"></div>').text('Posted at ----- ' + mracus[i].created_at);
             $('#rightSide').append($mracus);
             $('#rightSide').append($mracusTime);
          };
        })
      };

      var douglascalhounTweets = function(){
        var douglas = streams.users.douglascalhoun;
        $('#douglascalhoun').click(function() {
          $('#rightSide').children().remove();
          for (var i = 0; i < douglas.length; i++) {
            var $douglas = $('<div class="filterTweet"></div>');
            $douglas.text('@'+ douglas[i].user +':'+ douglas[i].message);
            var $douglasTime = $('<div class="filterTime"></div>').text('Posted at ----- ' + douglas[i].created_at);
             $('#rightSide').append($douglas);
             $('#rightSide').append($douglasTime);
          };
        })
      };


        $(document).ready(function(){
          var $body = $('body');
          
  
          var index = streams.home.length - 1;
          while(index >= 0){
            var tweet = streams.home[index];
            var $tweet = $('<div id="tweet"></div>');
            var $tweetTime = $('<div id = "tweetTime"></div>').text('Posted At ----- ' + tweet.created_at.getHours() + ':' + tweet.created_at.getMinutes() + ':' + tweet.created_at.getSeconds());
            $tweet.text('@' + tweet.user + ': ' + tweet.message);
            $('#first').append($tweet);
            $('#first').append($tweetTime);
            index -= 1;
            
          }
       
          // var scheduleSortShawn = function() {
          // setTimeout(specifiedUser, 5000);
          // };
          // scheduleSortShawn();

          shawndrostTweets();
          sharksforcheapTweets();
          mracusTweets();
          douglascalhounTweets();
          

          lastIndex = 10;
          
          function scheduleUpdate() {
            whatsNext();
            setTimeout(scheduleUpdate, 100);
          };
          scheduleUpdate();
        });
      </script>
  </head>
  <body>

    <!-- <button id="btn1">Refresh page</button> -->

    <h1>Twiddler</h1>
    <div id='userPick'>
      <button id="shawndrost">shawndrost</button>
      <button id="sharksforcheap">sharksforcheap</button>
      <button id="mracus">mracus</button>
      <button id="douglascalhoun">douglascalhoun</button>
    </div>
    <div id="rightSide"></div>
    <div  id="first"></div>
    <div id="next"></div>
    
    <p></p>
  </body>
</html>
