<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link href="./style.css" type="text/css" rel="stylesheet">
    <script>

      var lastIndex = 10;

      var whatsNext = function() {
        var newIndex = streams.home.length - 1;
        if (newIndex > lastIndex) {
          var nextTweet = streams.home[newIndex];
          var $nextTweet = $('<div id="nextTweet"></div>');
          var $nextTime = $('<div id="nextTime"></div>').text('Posted At ----- ' + nextTweet.created_at.getHours() + ':' + nextTweet.created_at.getMinutes() + ':' + nextTweet.created_at.getSeconds())
          $nextTweet.text('@'+ nextTweet.user + ':' + nextTweet.message);
          $('#next').append($nextTweet);
          $('#next').append($nextTime);
          lastIndex = newIndex;
        };
      };

      var userDex = 0;

      var specifiedUser = function(){
        var shawn = streams.users.shawndrost;
        var shawnsData = $('#shawndrost').click(function() {
          $('#rightSide').children().remove();
          for (var i = 0; i < shawn.length; i++) {
            var $shawn = $('<div id="shawnsData"><div>').text('@'+ shawn[i].user +':'+ shawn[i].message);
            var $shawnTime = $('<div>')
             $('#rightSide').append($shawn);

          };
        })
      };


        $(document).ready(function(){
          var $body = $('body');
          
  
          var index = streams.home.length - 1;
          while(index >= 0){
            var tweet = streams.home[index];
            var $tweet = $('<div id="tweet"></div>');
            var $tweetTime = $('<div id = "tweetTime"></div>').text('Posted At ----- ' + tweet.created_at.getHours() + ':' + tweet.created_at.getMinutes() + ':' + tweet.created_at.getSeconds());
            $tweet.text('@' + tweet.user + ': ' + tweet.message);
            $('#first').append($tweet);
            $('#first').append($tweetTime);
            index -= 1;
            
          }
       
          // var scheduleSortShawn = function() {
          // setTimeout(specifiedUser, 5000);
          // };
          // scheduleSortShawn();

          specifiedUser();
          

          lastIndex = 10;
          
          function scheduleUpdate() {
            whatsNext();
            setTimeout(scheduleUpdate, 100);
          };
          scheduleUpdate();
        });
      </script>
  </head>
  <body>

    <!-- <button id="btn1">Refresh page</button> -->

    <h1>Twiddler</h1>
    <div id='userPick'>
      <button id="shawndrost">shawndrost</button>
      <button id="sharksforcheap">sharksforcheap</button>
      <button id="mracus">mracus</button>
      <button id="douglascalhoun">douglascalhoun</button>
    </div>
    <div id="rightSide"></div>
    <div  id="first"></div>
    <div id="next"></div>
    
    <p></p>
  </body>
</html>
